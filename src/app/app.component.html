<div class="tut-grid lang_cyr">
  <div class="tut-contents">

    <div class="tut-buttons">

      <button (click)="showContent()" id="tut-btn-content" class="tut-btn lang_cyr">
        <span class="tut-btn-icon">üìú</span>–ó–º—ñ—Å—Ç
      </button>

      <button (click)="showInfoPrv()" id="tut-btn-lessn-prev" class="tut-btn lang_cyr">
        {{buttonTitleID?.prv}}. {{buttonTitles?.prv}}
        <span class="tut-btn-icon">üëà</span>
      </button>

      <button (click)="showInfo()" id="tut-btn-lessn-curr" class="tut-btn lang_cyr">
        <span class="tut-btn-icon">üëå</span> {{buttonTitleID?.cur}}. {{buttonTitles?.cur}}
      </button>

      <button (click)="showInfoNxt()" id="tut-btn-lessn-next" class="tut-btn lang_cyr">
        <span class="tut-btn-icon">üëâ</span>
        {{buttonTitleID?.nxt}}. {{buttonTitles?.nxt}}
      </button>

      <button (click)="toggleDrill()" id="tut-btn-drill" class="tut-btn lang_cyr" [disabled]="!drillNumber">
        –í–ø—Ä–∞–≤–∏: <span class="tut-btn-icon">{{drillNumber ? drillNumber : '-'}}</span>
      </button>

    </div>

    <div *ngIf="contStates.content">
      <app-tut-content class="content-grid"></app-tut-content>
    </div>

    <div *ngIf="contStates.infoBlock" [innerHTML]="(curInfoBlock | async)?.cjInfo | safe" class="tut-lesson-info"></div>

    <div class="tut-drill-n-board">

      <div *ngIf="curDrills.length && !contStates.infoBlock && !contStates.content" class="tut-lesson-drill">
        <div class="tut-drill-ua-txt">
          <button
            *ngFor="let el of curDrills; let i = index;"
            (click)="showDrillById(i)"

            class="drill-btn-txt lang_cyr">
            <span
              [ngClass]="{ 'active' : curDrillId === i}"
              class="drill-btn-title">–í–ø—Ä–∞–≤–∞ {{i+1}}:</span> {{el['ua']}}

          </button>
        </div>
        <div class="drill-input">
          <div *ngFor="let el of curDrills; let i = index;"><!-- { "zh": "Êó•", "en": "a" }-->
            <div *ngIf="curDrillId === i" class="drill-display">

              <!-- upper row -->
              <div class="empty-row">
                <div class="empty-row-item drill-control-panel">
                  <strong class="lang_cyr">–î–æ–ø–æ–º—ñ–∂–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤–ø—Ä–∞–≤</strong>
                  <div class="drill-buttons">

                    <div class="tooltip" data-direction="bottom">
                      <div class="tooltip__initiator">
                        <button
                          [ngClass]="{ 'drill-btn-active' : drillControls.kb}"
                          (click)="toggleKB()"
                          class="drill-btn lang_cyr tooltip">
                          –ö–ª–∞–≤—ñ–∞—Ç—É—Ä–∞
                        </button>
                      </div>
                      <div class="tooltip__item">
                        –¶–∞–Ω–¶–∑—î –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∞
                      </div>
                    </div>

                    <div class="tooltip" data-direction="bottom">
                      <div class="tooltip__initiator">
                        <button
                          [ngClass]="{ 'drill-btn-active' : drillControls.hint}"
                          (click)="toggleHint()"
                          class="drill-btn lang_cyr tooltip">
                          –ü—ñ–¥–∫–∞–∑–∫–∏
                        </button>
                      </div>
                      <div class="tooltip__item">
                        –ü—ñ–¥–∫–∞–∑–∫–∏ –∫–æ–¥—ñ–≤
                      </div>
                    </div>

                    <div class="tooltip" data-direction="bottom">
                      <div class="tooltip__initiator">
                        <button
                          [ngClass]="{ 'drill-btn-active' : drillControls.radical}"
                          (click)="toggleRadical()"
                          class="drill-btn lang_cyr tooltip">
                          –†–∞–¥–∏–∫–∞–ª–∏
                        </button>
                      </div>
                      <div class="tooltip__item">
                        –†–∞–¥–∏–∫–∞–ª–∏ –≤ –∫–æ–¥–∞—Ö
                      </div>
                    </div>

                  </div>
                </div>
                <!-- zh -->
                <div class="drill-hi">
                  <div *ngFor="let z of curDrill; let k = index; first as isFirst">
                    <div class="drill-hi-item-first lang_zh" *ngIf="isFirst">{{z['zh']}}</div>
                    <div class="drill-hi-item lang_zh" *ngIf="!isFirst">{{z['zh']}}</div>
                    <div
                      class="drill-code-item lang_en"
                      *ngIf="isFirst && drillControls.hint">
                      <span *ngIf="!drillControls.radical">
                      {{z['en'].toUpperCase()}}
                      </span>
                      <span *ngIf="drillControls.radical">
                        {{z['radical'].toUpperCase()}}
                      </span>
                      <span class="drill-code-item-wrong lang_en" *ngIf="z['wrong']">
                        {{z['wrong'].toUpperCase()}}
                      </span>
                      <span class="drill-code-item-group lang_en" *ngIf="z['group']">
                        {{z['group'].toUpperCase()}}
                      </span>
                    </div>
                  </div>
                </div>
              </div>

                <!-- current element input -->
                <div *ngIf="curDrill.length">
                  <input
                    maxlength="5"
                    size="22"
                    spellcheck="false"
                    pattern="[A-Za-z]+"
                    (ngModelChange)="getUserInput($event)"
                    [(ngModel)]="userInput"
                    type="text"
                    class="drill-css-input" appTxtInputFocus required />
                </div>
                <div class="drill-css-input-done lang_cyr" *ngIf="!curDrill.length">
                  –í–ø—Ä–∞–≤—É –∑–∞–∫—ñ–Ω—á–µ–Ω–æ. –í–∏–±–µ—Ä—ñ—Ç—å —ó—ó —â–µ —Ä–∞–∑, —ñ–Ω—à—É –≤–ø—Ä–∞–≤—É –∞–±–æ –ø–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —É—Ä–æ–∫.
                </div>

              <!-- lower row -->
              <div class="empty-row">
                <div [ngClass]="{ 'drill-hi-done-active' : taskDone.length}"
                     class="drill-hi-done">
                  <div *ngFor="let m of taskDone; let v = index;">
                    <div class="drill-hi-item-done lang_zh">{{m['zh']}}</div>
                    <div class="drill-code-item-done lang_en">{{m['en'].toUpperCase()}}</div>
                  </div>
                </div>
                <div class="empty-row-item"></div>
              </div>

            </div>

          </div>
        </div>

        <app-tut-kb *ngIf="drillControls.kb"></app-tut-kb>
      </div>

    </div>

  </div>
</div>
